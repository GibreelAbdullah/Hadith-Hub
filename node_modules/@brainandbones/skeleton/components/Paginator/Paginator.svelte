<script>import { createEventDispatcher } from 'svelte';
const dispatch = createEventDispatcher();
// Props
export let offset = 0;
export let limit = 5;
export let size = 10;
export let amounts = [1, 5, 10, 50, 100];
// Props (design)
export let justify = 'justify-between';
export let text = 'text-xs md:text-base';
export let select = undefined;
// Props (buttons)
export let buttons = 'btn-filled';
// Base Classes
const cBase = 'flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-4';
const cLabel = 'w-full md:w-auto';
const cPageText = 'whitespace-nowrap';
// Functionality
function onChangeLength() {
    offset = 0;
    dispatch('amount', length);
}
function onPrev() {
    offset--;
    dispatch('page', offset);
}
function onNext() {
    offset++;
    dispatch('page', offset);
}
// Reactive Classes
$: classesBase = `${cBase} ${justify} ${$$props.class ?? ''}`;
$: classesLabel = `${cLabel}`;
$: classesSelect = `${select}`;
$: classesPageText = `${cPageText} ${text}`;
</script>

<div class="paginator {classesBase}" data-testid="paginator">
	<!-- Select Amount -->
	<label class="paginator-label {classesLabel}">
		<select bind:value={limit} on:change={onChangeLength} class="paginator-select {classesSelect}" aria-label="Select Amount">
			{#each amounts as amount}<option value={amount}>Show {amount}</option>{/each}
		</select>
	</label>
	<!-- Details -->
	<p class="paginator-details {classesPageText}">
		{offset * limit + 1} to {offset * limit + limit} of <strong>{size}</strong>
	</p>
	<!-- Arrows -->
	<div class="paginator-arrows space-x-2">
		<button class="btn-icon {buttons}" on:click={onPrev} disabled={offset === 0}>&larr;</button>
		<button class="btn-icon {buttons}" on:click={onNext} disabled={(offset + 1) * limit >= size}>&rarr;</button>
	</div>
</div>
