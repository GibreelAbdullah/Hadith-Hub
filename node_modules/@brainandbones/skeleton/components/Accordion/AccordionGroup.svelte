<script>import { onMount, setContext } from 'svelte';
// Props
export let collapse = true;
// Props (item)
export let hover = 'bg-hover-token';
export let spacing = 'space-y-4';
export let padding = 'px-4 py-2';
export let rounded = 'rounded-token';
// Context
setContext('hover', hover);
setContext('spacing', spacing);
setContext('padding', padding);
setContext('rounded', rounded);
// Classes
const cBase = 'rounded-container-token';
// Local
let elemAccordian;
// Lifecycle
onMount(() => {
    if (collapse) {
        // Ensure only one detail element is open at a time
        // https://nikitahl.com/native-html-accordion
        const details = Array.from(elemAccordian.querySelectorAll('details'));
        details.forEach((detail) => {
            detail.addEventListener('click', (e) => {
                const active = details.find((d) => d.open);
                if (!e.currentTarget.open && active) {
                    active.open = false;
                }
            });
        });
    }
});
// Reactive
$: classesBase = `${cBase} ${spacing} ${$$props.class ?? ''}`;
</script>

<div bind:this={elemAccordian} class="accordian-group {classesBase}" data-testid="accordion-group">
	<slot />
</div>
