<script>import { getContext } from 'svelte';
// Context
export let selected = getContext('selected');
export let borderWidth = getContext('borderWidth');
export let borderColor = getContext('borderColor');
export let color = getContext('color');
export let fill = getContext('fill');
export let hover = getContext('hover');
export let rounded = getContext('rounded');
// Props
export let value = $selected.value;
// A11y
export let label = 'tab';
// Base Classes
const cBase = 'font-bold list-none py-2.5 px-4 flex items-center space-x-2 cursor-pointer';
const cBorderColor = 'border-transparent';
const cBaseLabel = 'font-bold whitespace-nowrap';
// A11y Input Handlers
function onKeyDown(event) {
    // Enter/Space to toggle element
    if (['Enter', 'Space'].includes(event.code)) {
        event.preventDefault();
        event.target.click();
    }
}
// Reactive Classes
$: isSelected = value == $selected;
$: classesSelected = isSelected ? `${borderWidth} ${borderColor} ${color} ${fill}` : `${borderWidth} ${cBorderColor}`;
$: classesBase = `${cBase} ${classesSelected} ${hover} ${rounded} ${$$props.class ?? ''}`;
$: classesLead = isSelected ? `${fill}` : 'fill-token';
$: classesLabel = `${cBaseLabel}`;
</script>

<li
	class="tab ${classesBase}"
	on:click={() => {
		selected.set(value);
	}}
	data-testid="tab"
	on:keydown={onKeyDown}
	role="tab"
	tabindex="0"
>
	<!-- Slot: Lead -->
	{#if $$slots.lead}<div class="tab-lead {classesLead}"><slot name="lead" /></div>{/if}
	<!-- Slot: Default -->
	{#if $$slots.default}<div class="tab-label {classesLabel}" {label}><slot /></div>{/if}
</li>
