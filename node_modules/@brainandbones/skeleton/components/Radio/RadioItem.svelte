<script>import { createEventDispatcher, getContext } from 'svelte';
// Event Handler
const dispatch = createEventDispatcher();
// Props
export let value = undefined;
// Props (A11y)
export let label = undefined;
// Context
export let selected = getContext('selected');
export let hover = getContext('hover');
export let accent = getContext('accent');
export let color = getContext('color');
export let fill = getContext('fill');
export let rounded = getContext('rounded');
// Base Classes
const cBase = ' font-bold text-base text-center px-4 py-2 cursor-pointer whitespace-nowrap';
// A11y Input Handlers
function onKeyDown(event) {
    // Enter/Space triggers selecton event
    if (['Enter', 'Space'].includes(event.code)) {
        event.preventDefault();
        dispatch('keydown', event);
        event.target.children[0].click();
    }
}
// Reactive Classes
$: checked = value === $selected;
$: classesSelected = checked ? `${accent} ${fill} ${color}` : `${hover}`;
$: classesLabel = `${cBase} ${classesSelected} ${rounded}`;
</script>

<div class="radio-item flex-auto" role="radio" aria-checked={checked} aria-label={label} tabindex="0" data-testid="radio-item" on:click on:keydown={onKeyDown}>
	<label class="radio-item-label {classesLabel}">
		<input class="radio-item-input hidden" type="radio" {value} bind:group={$selected} />
		<slot />
	</label>
</div>
